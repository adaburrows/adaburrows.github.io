<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Here we analyze a fairly standard architecture."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Analyzing the State of the Art"><meta property="og:description" content="Here we analyze a fairly standard architecture."><meta property="og:type" content="article"><meta property="og:url" content="http://adaburrows.com/docs/nkp/analyze-sota/"><meta property="article:modified_time" content="2020-06-17T11:58:25-04:00"><title>Analyzing the State of the Art | Jillian Ada Burrows</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.4cecdb821f23eb6b2899882e71bfc49ad09523d2b9b0196b07fa8ff6172a818d.css integrity="sha256-TOzbgh8j62somYgucb/EmtCVI9K5sBlrB/qP9hcqgY0="><script defer src=/en.search.min.bc9113efafffc6561811f43d2c33a312c50df79b33069ab2118918b17bb049ae.js integrity="sha256-vJET76//xlYYEfQ9LDOjEsUN95szBpqyEYkYsXuwSa4="></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-148152323-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><meta name=monetization content="$ilp.uphold.com/hB63LB3EwfW3"></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>Jillian Ada Burrows</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/docs/resume/>Resume</a><ul></ul></li><li><a href=/docs/ice-age/>Ice Age Map</a></li><li><a href=/docs/narrative-culture/ class=collapsed>The Emergence of Culture</a></li><li><a href=/docs/nkp/ class=collapsed>A Matter of Programming</a><ul><li><a href=/docs/nkp/introduction/>What is Programming About?</a></li><li><a href=/docs/nkp/analyze-sota/ class=active>Analyzing the State of the Art</a></li></ul></li><li><a href=/docs/math-explorations/ class=collapsed>Math Explorations</a></li></ul><ul><li><a href=/writing/>Writing</a></li><li><a href=/support-me/>Support My Work</a></li></ul><br><ul class=social><li><a rel=me href=https://instagram.com/adaburrows><i class="fab fa-instagram"></i>&nbsp;Instagram</a></li><li><a rel=me href=https://www.facebook.com/jillburrows.writer/><i class="fab fa-facebook-square"></i>&nbsp;Facebook</a></li><li><a rel=me href=https://twitter.com/jburrows><i class="fab fa-twitter-square"></i>&nbsp;Twitter</a></li><li><a rel=me href=https://www.linkedin.com/in/adaburrows/><i class="fab fa-linkedin"></i>&nbsp;Linkedin</a></li><li><a href=https://t.me/adaburrows><i class="fab fa-telegram"></i>&nbsp;Telegram</a></li><li><a href=https://discord.gg/mgtQBHV><i class="fab fa-discord"></i>&nbsp;Discord</a></li><li><a rel=me href=https://github.com/adaburrows/><i class="fab fa-github-square"></i>&nbsp;Github</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Analyzing the State of the Art</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#duplication-in-architecture>Duplication in Architecture</a></li><li><a href=#duplication-i-data-definitions-validations-and-serialization>Duplication I: Data Definitions, Validations, and Serialization</a></li><li><a href=#duplication-ii-business-and-workflow-logic>Duplication II: Business and Workflow Logic</a></li><li><a href=#duplication-iii-views-and-rendering>Duplication III: Views and Rendering</a></li></ul></nav></aside></header><article class=markdown><hr><p><strong>This is a work in progress. It will likely become a book at some point.</strong></p><hr><h1 id=analyzing-the-state-of-the-art>Analyzing the State of the Art
<a class=anchor href=#analyzing-the-state-of-the-art>#</a></h1><p>With todays applications, there is typically a focus on serving large numbers of
people across multiple platforms. This is complicated by those various platforms
requiring different languages and technologies in order to implement each part.
Many languages have been focused on incremental improvements over previous
languages. This is also the case for many web technologies.</p><p>We have a wide variety of languages which can be used on the server side. In
fact, our choice on the server side is nearly unlimited and is only constrained
by convenience or special needs. Clients can be written in many different
languages, especially given the rise of transpilers. Generally, browser based
apps are constrained to languages which readily allow usage of JavaScript
libraries. Client apps on iOS are limited Objective C, Swift, and other
languages which transpile to Javascipt running in a web view. Android apps are
limited to languages which run in the JVM, languages with a C interface which
can be called from within the JVM, and languages which transpile to JavaScript
running in a web view.
+
In the recent few years, web apps have started to mature in their approach to
using components, data binding, and approaches to manipulating the DOM. Methods
like Relay and GraphQL have also simplified the serialization of data for views.
Other technologies like flat buffers on ArrayBuffers, service workers, and HTTP/2
have allowed speeding up the tranfer of data.</p><p>Despite all of these improvements, web application development is still not too
far removed from where it was in the beginning when JavaScript and VBScript were
just taking off in browsers. Programming is still stuck in low level thought,
while apps are much broader in scope. Our languages and tools have not kept up
with the complexity of what we try to accomplish. Most of our programming
languages are still systems programming laguages leaving us to repeat oursleves
over and over again.</p><h2 id=duplication-in-architecture>Duplication in Architecture
<a class=anchor href=#duplication-in-architecture>#</a></h2><p>Let&rsquo;s analyze a relative simple web application that could be something from real
life. Each of the components may be physically duplicates and load balanced. We
have a system composed of:</p><ol><li>Websever which serves front end code.</li><li>Backend API service proxied through the webserver.</li><li>Database which holds all the data for the system.</li><li>Service which collects and aggregates statistics from the system in Redis.</li><li>Redis keystore which stores the online aggregation of data and also stores
the session data in another database.</li></ol><p><img src=./images/system-diagram.png alt></p><blockquote class="book-hint info"><p>We can see a lot duplication which should be examined in order to determine if
there are any opportunities for reducing complexity. The first set of duplicates
to bring attention to are the aspects of <strong>data modeling</strong> and <strong>validation</strong>.</p><p>There&rsquo;s actually a decent level of complexity going on here which needs to be
appreciated. Several other systems (not included here) likely interact with the
backend service. In many systems around today, there is likely an additional
service worker which handles longer running tasks. I&rsquo;m omitting all of that, just
to focus on the core of the problem.</p></blockquote><script src=/mermaid.min.js></script><script>mermaid.initialize({flowchart:{useMaxWidth:true}});</script><p class=mermaid>sequenceDiagram
autonumber
participant A as Alice
participant B as Browser
participant WS as Web Server
participant API
participant S as Service
participant DB
participant R as Redis
A ->> B: Navigates to site
B ->> WS: Initial Request
activate WS
WS -->> B: Returns Frontend (FE) to Browser
deactivate WS
B ->> WS: Auth check
activate WS
WS ->> API: Auth check (cont.)
activate API
API ->> R: Retrieve session data
activate R
R -->> API: Session data
deactivate R
API -->> WS: Return session, if exists
deactivate API
WS -->> B: Session (cont.)
deactivate WS
B ->> WS: Asset request
activate WS
B ->> WS: Asset request
WS -->> B: Return asset
WS -->> B: Return asset
deactivate WS
B ->> A: Sees the UI
A ->> B: Requests with UI
B ->> WS: FE requests from API
activate WS
WS ->> API: Webserver proxies to API
activate API
API ->> DB: API requests data from DB
activate DB
DB -->> API: DB returns data to API
deactivate DB
API -->> WS: API proxies through webserver
deactivate API
WS -->> B: FE receives the data from the API
deactivate WS
B -->> A: Sees update
A ->> B: Requests with UI
B ->> WS: FE requests from API
activate WS
WS ->> API: Webserver proxies to API
activate API
API ->> S: API requests data from S
activate S
S ->> R: S requests data from Redis
activate R
R -->> S: Redis returns data to Service
deactivate R
S -->> API: Returns data to API
deactivate S
API -->> WS: API proxies through webserver
deactivate API
WS -->> B: FE receives the data from the API
deactivate WS
B -->> A: Sees update</p><blockquote class="book-hint info">With this diagram and the one above, we can begin to see the complexity of
serializing, marshalling, and validating data and how it relates to the
duplication of the data models across multiple systems.</blockquote><h2 id=duplication-i-data-definitions-validations-and-serialization>Duplication I: Data Definitions, Validations, and Serialization
<a class=anchor href=#duplication-i-data-definitions-validations-and-serialization>#</a></h2><p>In this example let&rsquo;s assume the API is written in Ada, the FE is written
in JavaScript, the Service is written in C++, and the database schema is in a
MySQL dialect. This means that we have duplication of:</p><ul><li>the type specifications in four different languages.</li><li>validation constraints in four different laguages.</li><li>serialization of these models in three different languages (the DB already has
a serialization format built in, but I&rsquo;m not counting it since we don&rsquo;t have to
specify it or manually wire it).</li></ul><p>Let&rsquo;s take an overview of each of these. First, there&rsquo;s the SQL definition of the
table. There&rsquo;s a few things we need to notice about this. It uses the database&rsquo;s
built-in types. It specifies ranges on the length of certain fields. Curiously,
besides basic type safety, it provides no actual verification of the data for
patterns. If there was an <code>EMAIL</code> type in SQDL&rsquo;s DDL, it would be able to
validate the form of the email address according to the RFC. Having the database
perform all the validation would be less than ideal given the latency in verifying
the form of the data by going through at least two network connections, with one
potentially having less than ideal properties. Additionally, since databases often
do not have the same data types as programming languages, most stored values are
converted into their actual types. This is especially common now with noSQL
document stores. This means that validation is especially a bad match for DBs.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=color:#75715e>-- Using types provided by the database which may be different than the types
</span><span style=color:#75715e>-- provided by other languages.
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> person (
    id            INTEGER       <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>,
    first_name    VARCHAR(<span style=color:#ae81ff>50</span>)   <span style=color:#66d9ef>not</span> <span style=color:#66d9ef>null</span>,
    last_name     VARCHAR(<span style=color:#ae81ff>75</span>)   <span style=color:#66d9ef>not</span> <span style=color:#66d9ef>null</span>,
    nick_name     VARCHAR(<span style=color:#ae81ff>50</span>)   <span style=color:#66d9ef>not</span> <span style=color:#66d9ef>null</span>,
    dateofbirth   DATE          <span style=color:#66d9ef>not</span> <span style=color:#66d9ef>null</span>
);
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ada data-lang=ada><span style=color:#75715e>-- Ada doesn&#39;t have a standard Date type, but if you know Ada it&#39;s really easy
</span><span style=color:#75715e>-- to make your own date record type with bound checking. So assume we&#39;ve defined
</span><span style=color:#75715e>-- a Date type in `SomeLibrary`.
</span><span style=color:#75715e></span><span style=color:#f92672>with</span> SomeLibrary.Date
<span style=color:#66d9ef>type</span> <span style=color:#66d9ef>Person</span> <span style=color:#66d9ef>is</span> <span style=color:#66d9ef>record</span>
    id          : <span style=color:#66d9ef>Integer</span>;
    firstName   : <span style=color:#66d9ef>String</span>(<span style=color:#ae81ff>1</span> .. <span style=color:#ae81ff>50</span>);
    lastName    : <span style=color:#66d9ef>String</span>(<span style=color:#ae81ff>1</span> .. <span style=color:#ae81ff>75</span>);
    nickName    : <span style=color:#66d9ef>String</span>(<span style=color:#ae81ff>1</span> .. <span style=color:#ae81ff>50</span>);
    dateOfBirth : SomeLibrary.Date;
<span style=color:#66d9ef>end record</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=color:#75715e>/*
</span><span style=color:#75715e> * C++ also doesn&#39;t have a built in Date type, but we could build one using
</span><span style=color:#75715e> * &lt;ctime&gt; and adding a bit of math. For simplicity&#39;s sake, lets assume we&#39;ve
</span><span style=color:#75715e> * already defined one in SomeLibrary.
</span><span style=color:#75715e> */</span>

<span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;some_library.h&#34;</span><span style=color:#75715e>
</span><span style=color:#75715e></span><span style=color:#66d9ef>using</span> <span style=color:#66d9ef>namespace</span> SomeLibrary;
 
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Person</span> {
	<span style=color:#66d9ef>int</span> id;
	<span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> firstName;
	<span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> lastName;
	<span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> nickName;
	Date dateOfBirth;
}
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#75715e>/*
</span><span style=color:#75715e> * While JavaScript has a built in Date object. It is not a type. We know this
</span><span style=color:#75715e> * because `typeof (new Date()) === &#39;object&#39;`. This is on top of JavaScript
</span><span style=color:#75715e> * not being a statically typed language, so it doesn&#39;t matter so much.
</span><span style=color:#75715e> */</span>

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Person</span> {
	<span style=color:#a6e22e>id</span>;
	<span style=color:#a6e22e>firstName</span>;
	<span style=color:#a6e22e>lastName</span>;
	<span style=color:#a6e22e>nickName</span>;
	<span style=color:#a6e22e>dateOfBirth</span>;
}
</code></pre></div><h2 id=duplication-ii-business-and-workflow-logic>Duplication II: Business and Workflow Logic
<a class=anchor href=#duplication-ii-business-and-workflow-logic>#</a></h2><h2 id=duplication-iii-views-and-rendering>Duplication III: Views and Rendering
<a class=anchor href=#duplication-iii-views-and-rendering>#</a></h2></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/adaburrows/adaburrows.github.io/commit/7666d21fc0db8105ce722dd6e178d1b213b35b7f title="Last modified by Jillian Ada Burrows | June 17, 2020" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>June 17, 2020</span></a></div></div><p><i class="fas fa-recycle"></i>&nbsp;Please remember to recycle this page. <i class="fas fa-radiation"></i>&nbsp;<a style=color:#000 href=https://www.nj.gov/llrwsb/radwrld.htm>May contain trace amounts of radioactive materials.</a> <i class="fas fa-hands-wash"></i>&nbsp;Don't forget to wash your hands. <i class="fas fa-transgender-alt"></i>&nbsp;<a style=color:#000 href=https://transequality.org/issues/resources/supporting-the-transgender-people-in-your-life-a-guide-to-being-a-good-ally>Support your friendly trans people.</a> <a style=color:#000 href=https://blacklivesmatter.com/>#BlackLivesMatter</a> <a style=color:#000 href=https://resourcegeneration.org/land-reparations-indigenous-solidarity-action-guide/>#LandBack</a> <a style=color:#000 href=https://news.umiamihealth.org/en/your-questions-about-cloth-face-coverings-answered/>#MasksSaveLives</a></p></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#duplication-in-architecture>Duplication in Architecture</a></li><li><a href=#duplication-i-data-definitions-validations-and-serialization>Duplication I: Data Definitions, Validations, and Serialization</a></li><li><a href=#duplication-ii-business-and-workflow-logic>Duplication II: Business and Workflow Logic</a></li><li><a href=#duplication-iii-views-and-rendering>Duplication III: Views and Rendering</a></li></ul></nav></aside></main></body></html>